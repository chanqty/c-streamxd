<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Website</title>
  <link rel="stylesheet" href="css/home.css">
  <link rel="preload" href="css/home.css" as="style">
  <link rel="preload" href="js/home.js" as="script">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script defer src="js/home.js"></script>
  <style>
    /* Minimal CSS for accessibility and dark mode toggle */
    .visually-hidden {
      position: absolute;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0);
      border: 0;
    }
    .modal[hidden], .search-modal[hidden] { display: none !important; }
    .modal, .search-modal {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center;
      z-index: 1000;
    }
    .modal-content, .search-modal > div, .search-modal > input, .search-modal > .results {
      background: #fff; color: #222; border-radius: 8px; padding: 1em; max-width: 600px; width: 100%;
    }
    .close { background: none; border: none; font-size: 2em; cursor: pointer; position: absolute; top: 1em; right: 1em; }
    .navbar { display: flex; align-items: center; justify-content: space-between; padding: 1em; background: #222; color: #fff; }
    .nav-links { display: flex; align-items: center; gap: 1em; }
    .nav-links a, .footer-links a { color: inherit; text-decoration: none; margin-right: 1em; }
    .search-btn, #dark-toggle { background: none; border: none; color: inherit; font-size: 1.2em; cursor: pointer; }
    .banner { background: #444; color: #fff; padding: 2em 1em; text-align: center; }
    .row { margin: 2em 0; padding: 0 1em; }
    .list { display: flex; gap: 1em; flex-wrap: wrap; }
    .footer { background: #222; color: #fff; padding: 1em 0; text-align: center; }
    .footer-links { margin-top: 0.5em; }
    @media (max-width: 600px) {
      .navbar, .footer-content, .row, .list { flex-direction: column; align-items: stretch; }
      .nav-links { flex-direction: column; align-items: flex-start; }
      .banner h1 { font-size: 1.5rem; }
    }
    body.dark { background: #181818; color: #eee; }
    body.dark .modal-content, body.dark .search-modal > div, body.dark .search-modal > input, body.dark .search-modal > .results { background: #222; color: #eee; }
    body.dark .banner { background: #222; color: #eee; }
    body.dark .footer { background: #111; color: #ccc; }
  </style>
</head>

<body>
  <!-- Accessible Navigation Bar -->
  <nav class="navbar" aria-label="Main Navigation">
    <a href="index.html" class="logo-link" aria-label="Homepage">
      <img src="logo.png" alt="My Website Logo" style="height:40px;" />
    </a>
    <div class="nav-links">
      <a href="index.html" aria-current="page">Home</a>
      <button class="search-btn" aria-label="Open search" onclick="openSearchModal()">
        <i class="fas fa-search"></i>
      </button>
      <button id="dark-toggle" aria-label="Toggle dark mode"><i class="fas fa-moon"></i></button>
    </div>
  </nav>

  <!-- Banner Section -->
  <header class="banner" id="banner" tabindex="0" aria-label="Featured Content">
    <h1 id="banner-title"></h1>
  </header>

  <main>
    <!-- Trending Movies -->
    <section class="row" aria-labelledby="trending-movies">
      <h2 id="trending-movies">Trending Movies</h2>
      <div class="list" id="movies-list" role="list"></div>
    </section>

    <!-- Trending TV Shows -->
    <section class="row" aria-labelledby="trending-tv">
      <h2 id="trending-tv">Trending TV Shows</h2>
      <div class="list" id="tvshows-list" role="list"></div>
    </section>

    <!-- Trending Anime -->
    <section class="row" aria-labelledby="trending-anime">
      <h2 id="trending-anime">Trending Anime</h2>
      <div class="list" id="anime-list" role="list"></div>
    </section>
  </main>

  <!-- Modal for Details -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" hidden>
    <div class="modal-content" style="position:relative;">
      <button class="close" onclick="closeModal()" aria-label="Close" style="color: red;">&times;</button>
      <div class="modal-body" style="display:flex;gap:1em;">
        <img id="modal-image" src="" alt="" style="width:150px;height:auto;border-radius:8px;" />
        <div class="modal-text">
          <h2 id="modal-title"></h2>
          <div class="stars" id="modal-rating" aria-label="Rating"></div>
          <p id="modal-description"></p>
        </div>
      </div>
      <div class="server-selector" style="margin-top:1em;">
        <label for="server">Change Server:</label>
        <select id="server" onchange="changeServer()">
          <option value="vidsrc.cc">Vidsrc.cc</option>
          <option value="vidsrc.me">Vidsrc.me</option>
          <option value="player.videasy.net">Player.Videasy.net</option>
        </select>
      </div>
      <iframe id="modal-video" width="100%" height="315" frameborder="0" allowfullscreen title="Video Player" style="margin-top:1em;"></iframe>
    </div>
  </div>

  <!-- Search Modal -->
  <div class="search-modal" id="search-modal" role="dialog" aria-modal="true" aria-labelledby="search-input-label" tabindex="-1" hidden>
    <button class="close" onclick="closeSearchModal()" aria-label="Close" style="color: red;position:absolute;top:1em;right:1em;">&times;</button>
    <label id="search-input-label" for="search-input" class="visually-hidden">Search for a movie or show</label>
    <input type="text" id="search-input" placeholder="Search for a movie or show..." oninput="searchTMDB()" autocomplete="off" style="width:100%;margin-bottom:1em;" />
    <div class="results" id="search-results" role="listbox"></div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>&copy; 2025 My Website. All rights reserved.</p>
      <nav class="footer-links" aria-label="Footer">
        <a href="#">Disclaimer</a>
        <a href="#">About Us</a>
        <a href="#">Contact Us</a>
      </nav>
    </div>
  </footer>

  <script>
    // Dark mode toggle
    document.getElementById('dark-toggle').onclick = function() {
      document.body.classList.toggle('dark');
      // Optionally save preference
      localStorage.setItem('darkMode', document.body.classList.contains('dark'));
    };
    // On load, restore dark mode
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark');
    }

    // Modal open/close helpers
    function openModal() {
      document.getElementById('modal').hidden = false;
      document.getElementById('modal').focus();
    }
    function closeModal() {
      document.getElementById('modal').hidden = true;
    }
    function openSearchModal() {
      document.getElementById('search-modal').hidden = false;
      document.getElementById('search-input').focus();
    }
    function closeSearchModal() {
      document.getElementById('search-modal').hidden = true;
    }
    // Optional: ESC key closes modals
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") {
        closeModal();
        closeSearchModal();
      }
    });
    // Dummy function for server change
    function changeServer() {
      // Implement your logic here
      alert('Server changed to: ' + document.getElementById('server').value);
    }
    // Dummy function for search
    function searchTMDB() {
      // Implement your search logic here
      document.getElementById('search-results').innerHTML = "<div>Search results will appear here.</div>";
    }
    // Example: Set banner title
    document.getElementById('banner-title').textContent = "Welcome to My Website!";
  </script>
</body>
</html>
